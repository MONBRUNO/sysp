# 📂 Chapter 6: 파일 시스템 (File System)

유닉스 및 리눅스 운영체제에서의 파일 시스템 구조와 파일 입출력의 내부 구현, 디렉터리와 링크 시스템에 대해 다룹니다.

---

## 🧱 파일 시스템 구조

- **부트 블록**: 부트스트랩 코드 저장, 첫 번째 섹터 차지
- **슈퍼 블록**: 파일 시스템 전체 정보 저장 (총 블록 수, 블록 크기, 사용 가능한 블록 등)
- **i-리스트**: 모든 파일의 i-node 리스트
- **데이터 블록**: 실제 파일 내용 저장

📌 **i-node**는 파일 하나당 하나씩 존재하며, 파일의 크기, 권한, 소유자, 포인터 등을 포함합니다.

---

## 📁 파일 입출력 구현

파일 열기와 입출력은 커널 내 아래와 같은 자료구조를 통해 구현됩니다:

- **파일 디스크립터 배열 (FD Array)**: 각 프로세스마다 존재
- **열린 파일 테이블 (Open File Table)**: 시스템 전체의 열린 파일 리스트
- **동적 i-노드 테이블 (Active i-node table)**: 열린 파일들의 i-노드 정보 유지

📌 `dup()`, `dup2()` 호출을 통해 동일한 파일을 여러 디스크립터로 공유 가능

---

## 📊 파일 상태 정보

- `stat()`, `fstat()`, `lstat()` 함수로 파일의 메타데이터(크기, 권한, 링크 수 등) 조회 가능
- `struct stat` 구조체를 통해 다양한 정보 확인 가능:
  - `st_mode`: 접근 권한 및 파일 타입
  - `st_size`: 파일 크기
  - `st_mtime`: 최종 수정 시간 등

---

## 🔐 파일 권한 및 소유권

- `chmod()`, `fchmod()`로 권한 변경 (e.g. `chmod 644 filename`)
- `chown()`으로 파일 소유자 및 그룹 변경
- `utime()`으로 접근 시간 및 수정 시간 조정 가능

---

## 📂 디렉터리 구현

디렉터리도 파일로 취급되며, **디렉터리 엔트리**는 파일 이름과 i-node 번호를 포함합니다.

### 주요 함수

- `opendir()`, `readdir()`, `closedir()` : 디렉터리 순회
- `mkdir()`, `rmdir()` : 디렉터리 생성 및 삭제

---

## 🔗 링크 (Link)

- **하드 링크 (Hard Link)**: i-node를 공유하는 또 다른 파일명
- **심볼릭 링크 (Symbolic Link)**: 실제 경로명을 저장하는 포인터 형태

### 링크 함수들

- `link()`, `unlink()`: 하드 링크 생성/삭제
- `symlink()`, `readlink()`: 심볼릭 링크 생성 및 대상 경로 읽기

---

## 📌 핵심 요약

- 유닉스 파일 시스템은 부트 블록 → 슈퍼 블록 → i-리스트 → 데이터 블록 구조
- 모든 파일은 i-node 하나에 매핑됨
- 파일 입출력은 커널 자료구조를 통해 효율적으로 관리됨
- 디렉터리 및 링크는 특수한 파일로, 파일 시스템 내에서 같은 방식으로 처리됨
